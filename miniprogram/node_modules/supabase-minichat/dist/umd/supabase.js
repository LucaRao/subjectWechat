!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.supabase=t():e.supabase=t()}(self,(()=>{return e={296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(678),n=r(610),i=r(283),o=r(528),a=r(309),u=r(995),c=r(606),l={schema:"public",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:s.DEFAULT_HEADERS};t.default=class{constructor(e,t,r){if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(0,n.stripTrailingSlash)(e),o=Object.assign(Object.assign({},l),r);if(this.restUrl=`${i}/rest/v1`,this.authUrl=`${i}/auth/v1`,this.storageUrl=`${i}/storage/v1`,i.match(/(supabase\.co)|(supabase\.in)/)){const e=i.split(".");this.functionsUrl=`${e[0]}.functions.${e[1]}.${e[2]}`}else this.functionsUrl=`${i}/functions/v1`;this.schema=o.schema,this.multiTab=o.multiTab,this.fetch=o.fetch,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),null==r?void 0:r.headers),this.shouldThrowOnError=o.shouldThrowOnError||!1,this.auth=this._initSupabaseAuthClient(o),this._listenForAuthEvents(),this._listenForMultiTabEvents()}get functions(){return new u.FunctionsClient(this.functionsUrl,{headers:this._getAuthHeaders(),customFetch:this.fetch})}get storage(){return new a.SupabaseStorageClient(this.storageUrl,this._getAuthHeaders(),this.fetch)}from(e){const t=`${this.restUrl}/${e}`;return new o.SupabaseQueryBuilder(t,{headers:this._getAuthHeaders(),schema:this.schema,table:e,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(e,t,{head:r=!1,count:s=null}={}){return this._initPostgRESTClient().rpc(e,t,{head:r,count:s})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,localStorage:s,headers:n,fetch:o,cookieOptions:a,multiTab:u}){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new i.SupabaseAuthClient({url:this.authUrl,headers:Object.assign(Object.assign({},n),c),autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,localStorage:s,fetch:o,cookieOptions:a,multiTab:u})}_initPostgRESTClient(){return new c.PostgrestClient(this.restUrl,{headers:this._getAuthHeaders(),schema:this.schema,fetch:this.fetch,throwOnError:this.shouldThrowOnError})}_getAuthHeaders(){var e,t;const r=Object.assign({},this.headers),s=null!==(t=null===(e=this.auth.session())||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey;return r.apikey=this.supabaseKey,r.Authorization=r.Authorization||`Bearer ${s}`,r}_listenForMultiTabEvents(){if(!this.multiTab||!(0,n.isBrowser)()||!(null===window||void 0===window?void 0:window.addEventListener))return null;try{return null===window||void 0===window?void 0:window.addEventListener("storage",(e=>{var t,r,n;if(e.key===s.STORAGE_KEY){const s=JSON.parse(String(e.newValue)),i=null!==(r=null===(t=null==s?void 0:s.currentSession)||void 0===t?void 0:t.access_token)&&void 0!==r?r:void 0,o=null===(n=this.auth.session())||void 0===n?void 0:n.access_token;i?!o&&i?this._handleTokenChanged("SIGNED_IN",i,"STORAGE"):o!==i&&this._handleTokenChanged("TOKEN_REFRESHED",i,"STORAGE"):this._handleTokenChanged("SIGNED_OUT",i,"STORAGE")}}))}catch(e){return console.error("_listenForMultiTabEvents",e),null}}_listenForAuthEvents(){let{data:e}=this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,null==t?void 0:t.access_token,"CLIENT")}));return e}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===t?"SIGNED_OUT"!==e&&"USER_DELETED"!==e||"STORAGE"==r&&this.auth.signOut():("STORAGE"==r&&this.auth.setAuth(t),this.changedAccessToken=t)}}},59:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveFetch=void 0,t.resolveFetch=e=>{let t=r(437);return(...e)=>t(...e)}},995:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{u(s.next(e))}catch(e){i(e)}}function a(e){try{u(s.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionsClient=void 0;const n=r(59);let i=r(437);t.FunctionsClient=class{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=(0,n.resolveFetch)(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t){return s(this,void 0,void 0,(function*(){try{const{headers:r,body:s}=null!=t?t:{},n=yield i(`${this.url}/${e}`,{method:"POST",header:Object.assign({},this.headers,r),data:s}),o=n.headers.get("x-relay-error");if(o&&"true"===o)return{data:null,error:new Error(yield n.text())};let a;const{responseType:u}=null!=t?t:{};return a=u&&"json"!==u?"arrayBuffer"===u?yield n.arrayBuffer():"blob"===u?yield n.blob():yield n.text():yield n.json(),{data:a,error:null}}catch(e){return{data:null,error:e}}}))}}},992:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{u(s.next(e))}catch(e){i(e)}}function a(e){try{u(s.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=r(453),i=r(530),o=r(577),a=r(798);t.default=class{constructor({url:e="",headers:t={},cookieOptions:r,fetch:s}){this.url=e,this.headers=t,this.cookieOptions=Object.assign(Object.assign({},i.COOKIE_OPTIONS),r),this.fetch=(0,a.resolveFetch)(s)}_createRequestHeaders(e){const t=Object.assign({},this.headers);return t.Authorization=`Bearer ${e}`,t}cookieName(){var e;return null!==(e=this.cookieOptions.name)&&void 0!==e?e:""}getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if((null==t?void 0:t.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null==t?void 0:t.scopes)&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),null==t?void 0:t.queryParams){const e=new URLSearchParams(t.queryParams);r.push(`${e}`)}return`${this.url}/authorize?${r.join("&")}`}signUpWithEmail(e,t,r={}){return s(this,void 0,void 0,(function*(){try{const s=Object.assign({},this.headers);let i="";r.redirectTo&&(i="?redirect_to="+encodeURIComponent(r.redirectTo));const o=yield(0,n.post)(`${this.url}/signup${i}`,{email:e,password:t,data:r.data,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:s}),u=Object.assign({},o);return u.expires_in&&(u.expires_at=(0,a.expiresAt)(o.expires_in)),{data:u,error:null}}catch(e){return{data:null,error:e}}}))}signInWithEmail(e,t,r={}){return s(this,void 0,void 0,(function*(){try{const s=Object.assign({},this.headers);let i="?grant_type=password";r.redirectTo&&(i+="&redirect_to="+encodeURIComponent(r.redirectTo));const o=yield(0,n.post)(`${this.url}/token${i}`,{email:e,password:t,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:s}),u=Object.assign({},o);return u.expires_in&&(u.expires_at=(0,a.expiresAt)(o.expires_in)),{data:u,error:null}}catch(e){return{data:null,error:e}}}))}signUpWithPhone(e,t,r={}){return s(this,void 0,void 0,(function*(){try{const s=Object.assign({},this.headers),i=yield(0,n.post)(`${this.url}/signup`,{phone:e,password:t,data:r.data,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:s}),o=Object.assign({},i);return o.expires_in&&(o.expires_at=(0,a.expiresAt)(i.expires_in)),{data:o,error:null}}catch(e){return{data:null,error:e}}}))}signInWithPhone(e,t,r={}){return s(this,void 0,void 0,(function*(){try{const s=Object.assign({},this.headers),i="?grant_type=password",o=yield(0,n.post)(`${this.url}/token${i}`,{phone:e,password:t,gotrue_meta_security:{captcha_token:r.captchaToken}},{headers:s}),u=Object.assign({},o);return u.expires_in&&(u.expires_at=(0,a.expiresAt)(o.expires_in)),{data:u,error:null}}catch(e){return{data:null,error:e}}}))}signInWithOpenIDConnect({id_token:e,nonce:t,client_id:r,issuer:i,provider:o}){return s(this,void 0,void 0,(function*(){try{const s=Object.assign({},this.headers),u="?grant_type=id_token",c=yield(0,n.post)(`${this.url}/token${u}`,{id_token:e,nonce:t,client_id:r,issuer:i,provider:o},{headers:s}),l=Object.assign({},c);return l.expires_in&&(l.expires_at=(0,a.expiresAt)(c.expires_in)),{data:l,error:null}}catch(e){return{data:null,error:e}}}))}sendMagicLinkEmail(e,t={}){var r;return s(this,void 0,void 0,(function*(){try{const s=Object.assign({},this.headers);let i="";t.redirectTo&&(i+="?redirect_to="+encodeURIComponent(t.redirectTo));const o=null===(r=t.shouldCreateUser)||void 0===r||r;return{data:yield(0,n.post)(`${this.url}/otp${i}`,{email:e,create_user:o,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:s}),error:null}}catch(e){return{data:null,error:e}}}))}sendMobileOTP(e,t={}){var r;return s(this,void 0,void 0,(function*(){try{const s=null===(r=t.shouldCreateUser)||void 0===r||r,i=Object.assign({},this.headers);return{data:yield(0,n.post)(`${this.url}/otp`,{phone:e,create_user:s,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:i}),error:null}}catch(e){return{data:null,error:e}}}))}signOut(e){return s(this,void 0,void 0,(function*(){try{return yield(0,n.post)(`${this.url}/logout`,{},{headers:this._createRequestHeaders(e),noResolveJson:!0}),{error:null}}catch(e){return{error:e}}}))}verifyMobileOTP(e,t,r={}){return s(this,void 0,void 0,(function*(){try{const s=Object.assign({},this.headers),i=yield(0,n.post)(`${this.url}/verify`,{phone:e,token:t,type:"sms",redirect_to:r.redirectTo},{headers:s}),o=Object.assign({},i);return o.expires_in&&(o.expires_at=(0,a.expiresAt)(i.expires_in)),{data:o,error:null}}catch(e){return{data:null,error:e}}}))}verifyOTP({email:e,phone:t,token:r,type:i="sms"},o={}){return s(this,void 0,void 0,(function*(){try{const s=Object.assign({},this.headers),u=yield(0,n.post)(`${this.url}/verify`,{email:e,phone:t,token:r,type:i,redirect_to:o.redirectTo},{headers:s}),c=Object.assign({},u);return c.expires_in&&(c.expires_at=(0,a.expiresAt)(u.expires_in)),{data:c,error:null}}catch(e){return{data:null,error:e}}}))}inviteUserByEmail(e,t={}){return s(this,void 0,void 0,(function*(){try{const r=Object.assign({},this.headers);let s="";return t.redirectTo&&(s+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield(0,n.post)(`${this.url}/invite${s}`,{email:e,data:t.data},{headers:r}),error:null}}catch(e){return{data:null,error:e}}}))}resetPasswordForEmail(e,t={}){return s(this,void 0,void 0,(function*(){try{const r=Object.assign({},this.headers);let s="";return t.redirectTo&&(s+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield(0,n.post)(`${this.url}/recover${s}`,{email:e,gotrue_meta_security:{captcha_token:t.captchaToken}},{headers:r}),error:null}}catch(e){return{data:null,error:e}}}))}refreshAccessToken(e){return s(this,void 0,void 0,(function*(){try{const t=yield(0,n.post)(`${this.url}/token?grant_type=refresh_token`,{refresh_token:e},{headers:this.headers}),r=Object.assign({},t);return r.expires_in&&(r.expires_at=(0,a.expiresAt)(t.expires_in)),{data:r,error:null}}catch(e){return{data:null,error:e}}}))}setAuthCookie(e,t){"POST"!==e.method&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:r,session:s}=e.body;if(!r)throw new Error("Auth event missing!");if("SIGNED_IN"===r){if(!s)throw new Error("Auth session missing!");(0,o.setCookies)(e,t,[{key:"access-token",value:s.access_token},{key:"refresh-token",value:s.refresh_token}].map((e=>{var t;return{name:`${this.cookieName()}-${e.key}`,value:e.value,domain:this.cookieOptions.domain,maxAge:null!==(t=this.cookieOptions.lifetime)&&void 0!==t?t:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}})))}"SIGNED_OUT"===r&&(0,o.setCookies)(e,t,["access-token","refresh-token"].map((e=>({name:`${this.cookieName()}-${e}`,value:"",maxAge:-1})))),t.status(200).json({})}deleteAuthCookie(e,t,{redirectTo:r="/"}){return(0,o.setCookies)(e,t,["access-token","refresh-token"].map((e=>({name:`${this.cookieName()}-${e}`,value:"",maxAge:-1})))),t.redirect(307,r)}getAuthCookieString(e,t){"POST"!==e.method&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:r,session:s}=e.body;if(!r)throw new Error("Auth event missing!");if("SIGNED_IN"===r){if(!s)throw new Error("Auth session missing!");return(0,o.getCookieString)(e,t,[{key:"access-token",value:s.access_token},{key:"refresh-token",value:s.refresh_token}].map((e=>{var t;return{name:`${this.cookieName()}-${e.key}`,value:e.value,domain:this.cookieOptions.domain,maxAge:null!==(t=this.cookieOptions.lifetime)&&void 0!==t?t:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}})))}return"SIGNED_OUT"===r?(0,o.getCookieString)(e,t,["access-token","refresh-token"].map((e=>({name:`${this.cookieName()}-${e}`,value:"",maxAge:-1})))):t.getHeader("Set-Cookie")}generateLink(e,t,r={}){return s(this,void 0,void 0,(function*(){try{return{data:yield(0,n.post)(`${this.url}/admin/generate_link`,{type:e,email:t,password:r.password,data:r.data,redirect_to:r.redirectTo},{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}createUser(e){return s(this,void 0,void 0,(function*(){try{const t=yield(0,n.post)(`${this.url}/admin/users`,e,{headers:this.headers});return{user:t,data:t,error:null}}catch(e){return{user:null,data:null,error:e}}}))}listUsers(){return s(this,void 0,void 0,(function*(){try{return{data:(yield(0,n.get)(`${this.url}/admin/users`,{headers:this.headers})).users,error:null}}catch(e){return{data:null,error:e}}}))}getUserById(e){return s(this,void 0,void 0,(function*(){try{return{data:yield(0,n.get)(`${this.url}/admin/users/${e}`,{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}getUserByCookie(e,t){return s(this,void 0,void 0,(function*(){try{if(!e.cookies)throw new Error("Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!");const r=e.cookies[`${this.cookieName()}-access-token`],s=e.cookies[`${this.cookieName()}-refresh-token`];if(!r)throw new Error("No cookie found!");const{user:n,error:i}=yield this.getUser(r);if(i){if(!s)throw new Error("No refresh_token cookie found!");if(!t)throw new Error("You need to pass the res object to automatically refresh the session!");const{data:r,error:n}=yield this.refreshAccessToken(s);if(n)throw n;if(r)return(0,o.setCookies)(e,t,[{key:"access-token",value:r.access_token},{key:"refresh-token",value:r.refresh_token}].map((e=>{var t;return{name:`${this.cookieName()}-${e.key}`,value:e.value,domain:this.cookieOptions.domain,maxAge:null!==(t=this.cookieOptions.lifetime)&&void 0!==t?t:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))),{token:r.access_token,user:r.user,data:r.user,error:null}}return{token:r,user:n,data:n,error:null}}catch(e){return{token:null,user:null,data:null,error:e}}}))}updateUserById(e,t){return s(this,void 0,void 0,(function*(){try{const r=yield(0,n.put)(`${this.url}/admin/users/${e}`,t,{headers:this.headers});return{user:r,data:r,error:null}}catch(e){return{user:null,data:null,error:e}}}))}deleteUser(e){return s(this,void 0,void 0,(function*(){try{const t=yield(0,n.remove)(`${this.url}/admin/users/${e}`,{},{headers:this.headers});return{user:t,data:t,error:null}}catch(e){return{user:null,data:null,error:e}}}))}getUser(e){return s(this,void 0,void 0,(function*(){try{const t=yield(0,n.get)(`${this.url}/user`,{headers:this._createRequestHeaders(e)});return{user:t,data:t,error:null}}catch(e){return{user:null,data:null,error:e}}}))}updateUser(e,t){return s(this,void 0,void 0,(function*(){try{const r=yield(0,n.put)(`${this.url}/user`,t,{headers:this._createRequestHeaders(e)});return{user:r,data:r,error:null}}catch(e){return{user:null,data:null,error:e}}}))}}},502:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{u(s.next(e))}catch(e){i(e)}}function a(e){try{u(s.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((s=s.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(992)),o=r(798),a=r(530);(0,r(32).polyfillGlobalThis)();const u={url:a.GOTRUE_URL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:a.DEFAULT_HEADERS};t.default=class{constructor(e){this.stateChangeEmitters=new Map,this.networkRetries=0;const t=Object.assign(Object.assign({},u),e);this.currentUser=null,this.currentSession=null,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.multiTab=t.multiTab,this.localStorage=t.localStorage||globalThis.localStorage,this.api=new i.default({url:t.url,headers:t.headers,cookieOptions:t.cookieOptions,fetch:t.fetch}),this._recoverSession(),this._recoverAndRefresh(),this._listenForMultiTabEvents(),this._handleVisibilityChange(),t.detectSessionInUrl&&(0,o.isBrowser)()&&(0,o.getParameterByName)("access_token")&&this.getSessionFromUrl({storeSession:!0}).then((({error:e})=>{if(e)throw new Error("Error getting session from URL.")}))}signUp({email:e,password:t,phone:r},n={}){return s(this,void 0,void 0,(function*(){try{this._removeSession();const{data:s,error:i}=r&&t?yield this.api.signUpWithPhone(r,t,{data:n.data,captchaToken:n.captchaToken}):yield this.api.signUpWithEmail(e,t,{redirectTo:n.redirectTo,data:n.data,captchaToken:n.captchaToken});if(i)throw i;if(!s)throw"An error occurred on sign up.";let o=null,a=null;return s.access_token&&(o=s,a=o.user,this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN")),s.id&&(a=s),{user:a,session:o,error:null}}catch(e){return{user:null,session:null,error:e}}}))}signIn({email:e,phone:t,password:r,refreshToken:n,provider:i,oidc:o},a={}){return s(this,void 0,void 0,(function*(){try{if(this._removeSession(),e&&!r){const{error:t}=yield this.api.sendMagicLinkEmail(e,{redirectTo:a.redirectTo,shouldCreateUser:a.shouldCreateUser,captchaToken:a.captchaToken});return{user:null,session:null,error:t}}if(e&&r)return this._handleEmailSignIn(e,r,{redirectTo:a.redirectTo,captchaToken:a.captchaToken});if(t&&!r){const{error:e}=yield this.api.sendMobileOTP(t,{shouldCreateUser:a.shouldCreateUser,captchaToken:a.captchaToken});return{user:null,session:null,error:e}}if(t&&r)return this._handlePhoneSignIn(t,r);if(n){const{error:e}=yield this._callRefreshToken(n);if(e)throw e;return{user:this.currentUser,session:this.currentSession,error:null}}if(i)return this._handleProviderSignIn(i,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});if(o)return this._handleOpenIDConnectSignIn(o);throw new Error("You must provide either an email, phone number, a third-party provider or OpenID Connect.")}catch(e){return{user:null,session:null,error:e}}}))}verifyOTP(e,t={}){return s(this,void 0,void 0,(function*(){try{this._removeSession();const{data:r,error:s}=yield this.api.verifyOTP(e,t);if(s)throw s;if(!r)throw"An error occurred on token verification.";let n=null,i=null;return r.access_token&&(n=r,i=n.user,this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN")),r.id&&(i=r),{user:i,session:n,error:null}}catch(e){return{user:null,session:null,error:e}}}))}user(){return this.currentUser}session(){return this.currentSession}refreshSession(){var e;return s(this,void 0,void 0,(function*(){try{if(!(null===(e=this.currentSession)||void 0===e?void 0:e.access_token))throw new Error("Not logged in.");const{error:t}=yield this._callRefreshToken();if(t)throw t;return{data:this.currentSession,user:this.currentUser,error:null}}catch(e){return{data:null,user:null,error:e}}}))}update(e){var t;return s(this,void 0,void 0,(function*(){try{if(!(null===(t=this.currentSession)||void 0===t?void 0:t.access_token))throw new Error("Not logged in.");const{user:r,error:s}=yield this.api.updateUser(this.currentSession.access_token,e);if(s)throw s;if(!r)throw Error("Invalid user data.");const n=Object.assign(Object.assign({},this.currentSession),{user:r});return this._saveSession(n),this._notifyAllSubscribers("USER_UPDATED"),{data:r,user:r,error:null}}catch(e){return{data:null,user:null,error:e}}}))}setSession(e){return s(this,void 0,void 0,(function*(){try{if(!e)throw new Error("No current session.");const{data:t,error:r}=yield this.api.refreshAccessToken(e);return r?{session:null,error:r}:(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"),{session:t,error:null})}catch(e){return{error:e,session:null}}}))}setAuth(e){return this.currentSession=Object.assign(Object.assign({},this.currentSession),{access_token:e,token_type:"bearer",user:this.user()}),this._notifyAllSubscribers("TOKEN_REFRESHED"),this.currentSession}getSessionFromUrl(e){return s(this,void 0,void 0,(function*(){try{if(!(0,o.isBrowser)())throw new Error("No browser detected.");const t=(0,o.getParameterByName)("error_description");if(t)throw new Error(t);const r=(0,o.getParameterByName)("provider_token"),s=(0,o.getParameterByName)("access_token");if(!s)throw new Error("No access_token detected.");const n=(0,o.getParameterByName)("expires_in");if(!n)throw new Error("No expires_in detected.");const i=(0,o.getParameterByName)("refresh_token");if(!i)throw new Error("No refresh_token detected.");const a=(0,o.getParameterByName)("token_type");if(!a)throw new Error("No token_type detected.");const u=Math.round(Date.now()/1e3)+parseInt(n),{user:c,error:l}=yield this.api.getUser(s);if(l)throw l;const h={provider_token:r,access_token:s,expires_in:parseInt(n),expires_at:u,refresh_token:i,token_type:a,user:c};if(null==e?void 0:e.storeSession){this._saveSession(h);const e=(0,o.getParameterByName)("type");this._notifyAllSubscribers("SIGNED_IN"),"recovery"===e&&this._notifyAllSubscribers("PASSWORD_RECOVERY")}return window.location.hash="",{data:h,error:null}}catch(e){return{data:null,error:e}}}))}signOut(){var e;return s(this,void 0,void 0,(function*(){const t=null===(e=this.currentSession)||void 0===e?void 0:e.access_token;if(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"),t){const{error:e}=yield this.api.signOut(t);if(e)return{error:e}}return{error:null}}))}onAuthStateChange(e){try{const t=(0,o.uuid)(),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),{data:r,error:null}}catch(e){return{data:null,error:e}}}_handleEmailSignIn(e,t,r={}){var n,i;return s(this,void 0,void 0,(function*(){try{const{data:s,error:o}=yield this.api.signInWithEmail(e,t,{redirectTo:r.redirectTo,captchaToken:r.captchaToken});return o||!s?{data:null,user:null,session:null,error:o}:(((null===(n=null==s?void 0:s.user)||void 0===n?void 0:n.confirmed_at)||(null===(i=null==s?void 0:s.user)||void 0===i?void 0:i.email_confirmed_at))&&(this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN")),{data:s,user:s.user,session:s,error:null})}catch(e){return{data:null,user:null,session:null,error:e}}}))}_handlePhoneSignIn(e,t,r={}){var n;return s(this,void 0,void 0,(function*(){try{const{data:s,error:i}=yield this.api.signInWithPhone(e,t,r);return i||!s?{data:null,user:null,session:null,error:i}:((null===(n=null==s?void 0:s.user)||void 0===n?void 0:n.phone_confirmed_at)&&(this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN")),{data:s,user:s.user,session:s,error:null})}catch(e){return{data:null,user:null,session:null,error:e}}}))}_handleProviderSignIn(e,t={}){const r=this.api.getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});try{return(0,o.isBrowser)()&&(window.location.href=r),{provider:e,url:r,data:null,session:null,user:null,error:null}}catch(t){return r?{provider:e,url:r,data:null,session:null,user:null,error:null}:{data:null,user:null,session:null,error:t}}}_handleOpenIDConnectSignIn({id_token:e,nonce:t,client_id:r,issuer:n,provider:i}){return s(this,void 0,void 0,(function*(){if(e&&t&&(r&&n||i))try{const{data:s,error:o}=yield this.api.signInWithOpenIDConnect({id_token:e,nonce:t,client_id:r,issuer:n,provider:i});return o||!s?{user:null,session:null,error:o}:(this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN"),{user:s.user,session:s,error:null})}catch(e){return{user:null,session:null,error:e}}throw new Error("You must provide a OpenID Connect provider with your id token and nonce.")}))}_recoverSession(){try{const e=(0,o.getItemSynchronously)(this.localStorage,a.STORAGE_KEY);if(!e)return null;const{currentSession:t,expiresAt:r}=e;r>=Math.round(Date.now()/1e3)+a.EXPIRY_MARGIN&&(null==t?void 0:t.user)&&(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"))}catch(e){console.log("error",e)}}_recoverAndRefresh(){return s(this,void 0,void 0,(function*(){try{const e=yield(0,o.getItemAsync)(this.localStorage,a.STORAGE_KEY);if(!e)return null;const{currentSession:t,expiresAt:r}=e;if(r<Math.round(Date.now()/1e3)+a.EXPIRY_MARGIN)if(this.autoRefreshToken&&t.refresh_token){this.networkRetries++;const{error:e}=yield this._callRefreshToken(t.refresh_token);if(e){if(console.log(e.message),e.message===a.NETWORK_FAILURE.ERROR_MESSAGE&&this.networkRetries<a.NETWORK_FAILURE.MAX_RETRIES)return this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),void(this.refreshTokenTimer=setTimeout((()=>this._recoverAndRefresh()),100*Math.pow(a.NETWORK_FAILURE.RETRY_INTERVAL,this.networkRetries)));yield this._removeSession()}this.networkRetries=0}else this._removeSession();else t?(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN")):(console.log("Current session is missing data."),this._removeSession())}catch(e){return console.error(e),null}}))}_callRefreshToken(e){var t;return void 0===e&&(e=null===(t=this.currentSession)||void 0===t?void 0:t.refresh_token),s(this,void 0,void 0,(function*(){try{if(!e)throw new Error("No current session.");const{data:t,error:r}=yield this.api.refreshAccessToken(e);if(r)throw r;if(!t)throw Error("Invalid session data.");return this._saveSession(t),this._notifyAllSubscribers("TOKEN_REFRESHED"),this._notifyAllSubscribers("SIGNED_IN"),{data:t,error:null}}catch(e){return{data:null,error:e}}}))}_notifyAllSubscribers(e){this.stateChangeEmitters.forEach((t=>t.callback(e,this.currentSession)))}_saveSession(e){this.currentSession=e,this.currentUser=e.user;const t=e.expires_at;if(t){const e=t-Math.round(Date.now()/1e3),r=e>a.EXPIRY_MARGIN?a.EXPIRY_MARGIN:.5;this._startAutoRefreshToken(1e3*(e-r))}this.persistSession&&e.expires_at&&this._persistSession(this.currentSession)}_persistSession(e){const t={currentSession:e,expiresAt:e.expires_at};(0,o.setItemAsync)(this.localStorage,a.STORAGE_KEY,t)}_removeSession(){return s(this,void 0,void 0,(function*(){this.currentSession=null,this.currentUser=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),(0,o.removeItemAsync)(this.localStorage,a.STORAGE_KEY)}))}_startAutoRefreshToken(e){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),e<=0||!this.autoRefreshToken||(this.refreshTokenTimer=setTimeout((()=>s(this,void 0,void 0,(function*(){this.networkRetries++;const{error:e}=yield this._callRefreshToken();e||(this.networkRetries=0),(null==e?void 0:e.message)===a.NETWORK_FAILURE.ERROR_MESSAGE&&this.networkRetries<a.NETWORK_FAILURE.MAX_RETRIES&&this._startAutoRefreshToken(100*Math.pow(a.NETWORK_FAILURE.RETRY_INTERVAL,this.networkRetries))}))),e),"function"==typeof this.refreshTokenTimer.unref&&this.refreshTokenTimer.unref())}_listenForMultiTabEvents(){if(!this.multiTab||!(0,o.isBrowser)()||!(null===window||void 0===window?void 0:window.addEventListener))return!1;try{null===window||void 0===window||window.addEventListener("storage",(e=>{var t;if(e.key===a.STORAGE_KEY){const r=JSON.parse(String(e.newValue));(null===(t=null==r?void 0:r.currentSession)||void 0===t?void 0:t.access_token)?(this._saveSession(r.currentSession),this._notifyAllSubscribers("SIGNED_IN")):(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"))}}))}catch(e){console.error("_listenForMultiTabEvents",e)}}_handleVisibilityChange(){if(!this.multiTab||!(0,o.isBrowser)()||!(null===window||void 0===window?void 0:window.addEventListener))return!1;try{null===window||void 0===window||window.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&this._recoverAndRefresh()}))}catch(e){console.error("_handleVisibilityChange",e)}}}},800:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GoTrueClient=t.GoTrueApi=void 0;const o=i(r(992));t.GoTrueApi=o.default;const a=i(r(502));t.GoTrueClient=a.default,n(r(706),t)},530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COOKIE_OPTIONS=t.STORAGE_KEY=t.NETWORK_FAILURE=t.EXPIRY_MARGIN=t.DEFAULT_HEADERS=t.AUDIENCE=t.GOTRUE_URL=void 0;const s=r(967);t.GOTRUE_URL="http://localhost:9999",t.AUDIENCE="",t.DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${s.version}`},t.EXPIRY_MARGIN=10,t.NETWORK_FAILURE={ERROR_MESSAGE:"Request Failed",MAX_RETRIES:10,RETRY_INTERVAL:2},t.STORAGE_KEY="supabase.auth.token",t.COOKIE_OPTIONS={name:"sb",lifetime:28800,domain:"",path:"/",sameSite:"lax"}},577:(e,t)=>{"use strict";function r(e,t,r){const s=r.map((t=>{return r=t,s=function(e){if(!e||!e.headers||!e.headers.host)throw new Error('The "host" request header is not available');const t=e.headers.host.indexOf(":")>-1&&e.headers.host.split(":")[0]||e.headers.host;return!(["localhost","127.0.0.1"].indexOf(t)>-1||t.endsWith(".local"))}(e),function(e,t,r){const s=r||{},n=encodeURIComponent,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;if("function"!=typeof n)throw new TypeError("option encode is invalid");if(!i.test(e))throw new TypeError("argument name is invalid");const o=n(t);if(o&&!i.test(o))throw new TypeError("argument val is invalid");let a=e+"="+o;if(null!=s.maxAge){const e=s.maxAge-0;if(isNaN(e)||!isFinite(e))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(e)}if(s.domain){if(!i.test(s.domain))throw new TypeError("option domain is invalid");a+="; Domain="+s.domain}if(s.path){if(!i.test(s.path))throw new TypeError("option path is invalid");a+="; Path="+s.path}if(s.expires){if("function"!=typeof s.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(a+="; HttpOnly"),s.secure&&(a+="; Secure"),s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a}(r.name,r.value,{maxAge:r.maxAge,expires:new Date(Date.now()+1e3*r.maxAge),httpOnly:!0,secure:s,path:null!==(n=r.path)&&void 0!==n?n:"/",domain:null!==(i=r.domain)&&void 0!==i?i:"",sameSite:null!==(o=r.sameSite)&&void 0!==o?o:"lax"});var r,s,n,i,o})),n=t.getHeader("Set-Cookie");return n&&(n instanceof Array?Array.prototype.push.apply(s,n):"string"==typeof n&&s.push(n)),s}function s(e,t,s){t.setHeader("Set-Cookie",r(e,t,s))}function n(e,t,r){s(e,t,[r])}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCookie=t.setCookie=t.setCookies=t.getCookieString=void 0,t.getCookieString=r,t.setCookies=s,t.setCookie=n,t.deleteCookie=function(e,t,r){n(e,t,{name:r,value:"",maxAge:-1})}},453:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{u(s.next(e))}catch(e){i(e)}}function a(e){try{u(s.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.put=t.post=t.get=void 0;const n=r(530),i=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);let o=r(437);function a(e,t,r,a){return s(this,void 0,void 0,(function*(){return new Promise(((s,u)=>{let c=((e,t,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e||(s.headers=Object.assign({"Content-Type":"text/plain;charset=UTF-8"},null==t?void 0:t.headers),s.body=JSON.stringify(r)),s})(e,r,a);c=Object.assign(Object.assign({},c),{header:c.headers,data:JSON.parse(c.body)}),o(t,c).then((e=>{if(200!=e.statusCode)throw e;return(null==r?void 0:r.noResolveJson)?s:e})).then((e=>s(e))).catch((e=>((e,t)=>(null==e?void 0:e.status)?"function"!=typeof e.json?t(e):void e.json().then((r=>t({message:i(r),status:(null==e?void 0:e.status)||500}))):t({message:n.NETWORK_FAILURE.ERROR_MESSAGE}))(e,u)))}))}))}t.get=function(e,t){return s(this,void 0,void 0,(function*(){return a("GET",e,t)}))},t.post=function(e,t,r){return s(this,void 0,void 0,(function*(){return a("POST",e,r,t)}))},t.put=function(e,t,r){return s(this,void 0,void 0,(function*(){return a("PUT",e,r,t)}))},t.remove=function(e,t,r){return s(this,void 0,void 0,(function*(){return a("DELETE",e,r,t)}))}},798:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{u(s.next(e))}catch(e){i(e)}}function a(e){try{u(s.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.removeItemAsync=t.getItemSynchronously=t.getItemAsync=t.setItemAsync=t.resolveFetch=t.getParameterByName=t.isBrowser=t.uuid=t.expiresAt=void 0,t.expiresAt=function(e){return Math.round(Date.now()/1e3)+e},t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},t.isBrowser=()=>"undefined"!=typeof window,t.getParameterByName=function(e,t){var r;t||(t=(null===(r=null===window||void 0===window?void 0:window.location)||void 0===r?void 0:r.href)||""),e=e.replace(/[\[\]]/g,"\\$&");const s=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)").exec(t);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null},t.resolveFetch=e=>{let t=r(437);return(...e)=>t(...e)},t.setItemAsync=(e,r,n)=>s(void 0,void 0,void 0,(function*(){(0,t.isBrowser)()&&(yield null==e?void 0:e.setItem(r,JSON.stringify(n)))})),t.getItemAsync=(e,r)=>s(void 0,void 0,void 0,(function*(){const s=(0,t.isBrowser)()&&(yield null==e?void 0:e.getItem(r));if(!s)return null;try{return JSON.parse(s)}catch(e){return s}})),t.getItemSynchronously=(e,r)=>{const s=(0,t.isBrowser)()&&(null==e?void 0:e.getItem(r));if(!s||"string"!=typeof s)return null;try{return JSON.parse(s)}catch(e){return s}},t.removeItemAsync=(e,r)=>s(void 0,void 0,void 0,(function*(){(0,t.isBrowser)()&&(yield null==e?void 0:e.removeItem(r))}))},32:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.polyfillGlobalThis=void 0,t.polyfillGlobalThis=function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}},706:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0"},341:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSession=t.AuthUser=t.SupabaseRealtimePayload=t.SupabaseClientOptions=t.SupabaseClient=t.createClient=t.PostgrestError=t.PostgrestMaybeSingleResponse=t.PostgrestSingleResponse=t.PostgrestResponse=void 0;const o=i(r(296));t.SupabaseClient=o.default;const a=r(717);Object.defineProperty(t,"SupabaseClientOptions",{enumerable:!0,get:function(){return a.SupabaseClientOptions}}),Object.defineProperty(t,"SupabaseRealtimePayload",{enumerable:!0,get:function(){return a.SupabaseRealtimePayload}});const u=r(800);Object.defineProperty(t,"AuthUser",{enumerable:!0,get:function(){return u.User}}),Object.defineProperty(t,"AuthSession",{enumerable:!0,get:function(){return u.Session}}),n(r(800),t);var c=r(606);Object.defineProperty(t,"PostgrestResponse",{enumerable:!0,get:function(){return c.PostgrestResponse}}),Object.defineProperty(t,"PostgrestSingleResponse",{enumerable:!0,get:function(){return c.PostgrestSingleResponse}}),Object.defineProperty(t,"PostgrestMaybeSingleResponse",{enumerable:!0,get:function(){return c.PostgrestMaybeSingleResponse}}),Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return c.PostgrestError}}),t.createClient=(e,t,r)=>new o.default(e,t,r)},283:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SupabaseAuthClient=void 0;const s=r(800);class n extends s.GoTrueClient{constructor(e){super(e)}}t.SupabaseAuthClient=n},528:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SupabaseQueryBuilder=void 0;const s=r(606);class n extends s.PostgrestQueryBuilder{constructor(e,{headers:t={},schema:r,table:s,fetch:n,shouldThrowOnError:i}){super(e,{headers:t,schema:r,fetch:n,shouldThrowOnError:i}),this._headers=t,this._schema=r,this._table=s}}t.SupabaseQueryBuilder=n},678:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STORAGE_KEY=t.DEFAULT_HEADERS=void 0;const s=r(506);t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js/${s.version}`},t.STORAGE_KEY="supabase.auth.token"},610:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.stripTrailingSlash=t.uuid=void 0,t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},t.stripTrailingSlash=function(e){return e.replace(/\/$/,"")},t.isBrowser=()=>"undefined"!=typeof window},717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},506:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},748:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(170)),i=s(r(918)),o=r(613);t.default=class{constructor(e,{headers:t={},schema:r,fetch:s,throwOnError:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},o.DEFAULT_HEADERS),t),this.schema=r,this.fetch=s,this.shouldThrowOnError=n}auth(e){return this.headers.Authorization=`Bearer ${e}`,this}from(e){const t=`${this.url}/${e}`;return new n.default(t,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(e,t,{head:r=!1,count:s=null}={}){const n=`${this.url}/rpc/${e}`;return new i.default(n,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError}).rpc(t,{head:r,count:s})}}},606:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestMaybeSingleResponse=t.PostgrestSingleResponse=t.PostgrestResponse=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestBuilder=t.PostgrestClient=void 0;const n=s(r(748));t.PostgrestClient=n.default;const i=s(r(144));t.PostgrestFilterBuilder=i.default;const o=s(r(170));t.PostgrestQueryBuilder=o.default;const a=r(229);Object.defineProperty(t,"PostgrestBuilder",{enumerable:!0,get:function(){return a.PostgrestBuilder}}),Object.defineProperty(t,"PostgrestResponse",{enumerable:!0,get:function(){return a.PostgrestResponse}}),Object.defineProperty(t,"PostgrestSingleResponse",{enumerable:!0,get:function(){return a.PostgrestSingleResponse}}),Object.defineProperty(t,"PostgrestMaybeSingleResponse",{enumerable:!0,get:function(){return a.PostgrestMaybeSingleResponse}}),Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return a.PostgrestError}})},144:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(153));class i extends n.default{constructor(){super(...arguments),this.cs=this.contains,this.cd=this.containedBy,this.sl=this.rangeLt,this.sr=this.rangeGt,this.nxl=this.rangeGte,this.nxr=this.rangeLte,this.adj=this.rangeAdjacent,this.ov=this.overlaps}not(e,t,r){return this.url.searchParams.append(`${e}`,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=void 0===t?"or":`${t}.or`;return this.url.searchParams.append(r,`(${e})`),this}eq(e,t){return this.url.searchParams.append(`${e}`,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(`${e}`,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(`${e}`,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(`${e}`,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(`${e}`,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(`${e}`,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(`${e}`,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(`${e}`,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(`${e}`,`is.${t}`),this}in(e,t){const r=t.map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(`${e}`,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(`${e}`,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cs.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(`${e}`,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cd.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cd.${JSON.stringify(t)}`),this}rangeLt(e,t){return this.url.searchParams.append(`${e}`,`sl.${t}`),this}rangeGt(e,t){return this.url.searchParams.append(`${e}`,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(`${e}`,`nxl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(`${e}`,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(`${e}`,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(`${e}`,`ov.${t}`):this.url.searchParams.append(`${e}`,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s=null}={}){let n="";"plain"===s?n="pl":"phrase"===s?n="ph":"websearch"===s&&(n="w");const i=void 0===r?"":`(${r})`;return this.url.searchParams.append(`${e}`,`${n}fts${i}.${t}`),this}fts(e,t,{config:r}={}){const s=void 0===r?"":`(${r})`;return this.url.searchParams.append(`${e}`,`fts${s}.${t}`),this}plfts(e,t,{config:r}={}){const s=void 0===r?"":`(${r})`;return this.url.searchParams.append(`${e}`,`plfts${s}.${t}`),this}phfts(e,t,{config:r}={}){const s=void 0===r?"":`(${r})`;return this.url.searchParams.append(`${e}`,`phfts${s}.${t}`),this}wfts(e,t,{config:r}={}){const s=void 0===r?"":`(${r})`;return this.url.searchParams.append(`${e}`,`wfts${s}.${t}`),this}filter(e,t,r){return this.url.searchParams.append(`${e}`,`${t}.${r}`),this}match(e){return Object.keys(e).forEach((t=>{this.url.searchParams.append(`${t}`,`eq.${e[t]}`)})),this}}t.default=i},170:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(229),i=s(r(144));class o extends n.PostgrestBuilder{constructor(e,{headers:t={},schema:r,fetch:s,shouldThrowOnError:n}={}){super({fetch:s,shouldThrowOnError:n}),this.url=new webkitURL(e),this.headers=Object.assign({},t),this.schema=r}select(e="*",{head:t=!1,count:r=null}={}){this.method="GET";let s=!1;const n=e.split("").map((e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e))).join("");return this.url.searchParams.set("select",n),r&&(this.headers.Prefer=`count=${r}`),t&&(this.method="HEAD"),new i.default(this)}insert(e,{upsert:t=!1,onConflict:r,returning:s="representation",count:n=null}={}){this.method="POST";const o=[`return=${s}`];if(t&&o.push("resolution=merge-duplicates"),t&&void 0!==r&&this.url.searchParams.set("on_conflict",r),this.body=e,n&&o.push(`count=${n}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new i.default(this)}upsert(e,{onConflict:t,returning:r="representation",count:s=null,ignoreDuplicates:n=!1}={}){this.method="POST";const o=[`resolution=${n?"ignore":"merge"}-duplicates`,`return=${r}`];return void 0!==t&&this.url.searchParams.set("on_conflict",t),this.body=e,s&&o.push(`count=${s}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new i.default(this)}update(e,{returning:t="representation",count:r=null}={}){this.method="PATCH";const s=[`return=${t}`];return this.body=e,r&&s.push(`count=${r}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new i.default(this)}delete({returning:e="representation",count:t=null}={}){this.method="DELETE";const r=[`return=${e}`];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new i.default(this)}}t.default=o},918:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(229),i=s(r(144));class o extends n.PostgrestBuilder{constructor(e,{headers:t={},schema:r,fetch:s,shouldThrowOnError:n}={}){super({fetch:s,shouldThrowOnError:n}),this.url=new webkitURL(e),this.headers=Object.assign({},t),this.schema=r}rpc(e,{head:t=!1,count:r=null}={}){return t?(this.method="HEAD",e&&Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,t)}))):(this.method="POST",this.body=e),r&&(void 0!==this.headers.Prefer?this.headers.Prefer+=`,count=${r}`:this.headers.Prefer=`count=${r}`),new i.default(this)}}t.default=o},153:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(229);class n extends s.PostgrestBuilder{select(e="*"){let t=!1;const r=e.split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",r),this}order(e,{ascending:t=!0,nullsFirst:r=!1,foreignTable:s}={}){const n=void 0===s?"order":`${s}.order`,i=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${i?`${i},`:""}${e}.${t?"asc":"desc"}.${r?"nullsfirst":"nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=void 0===t?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const s=void 0===r?"offset":`${r}.offset`,n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(n,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:n=!1}={}){const i=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),o=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+json; for="${o}"; options=${i};`,this}}t.default=n},613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const s=r(629);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${s.version}`}},229:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{u(s.next(e))}catch(e){i(e)}}function a(e){try{u(s.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestBuilder=void 0;let n=r(437);t.PostgrestBuilder=class{constructor(e){let t;Object.assign(this,e);const s=r(437);t=s,this.fetch=(...e)=>t(...e),this.shouldThrowOnError=e.shouldThrowOnError||!1,this.allowEmpty=e.allowEmpty||!1}throwOnError(e){return null==e&&(e=!0),this.shouldThrowOnError=e,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=n(this.url.toString(),{method:this.method,header:this.headers,data:JSON.stringify(this.body),signal:this.signal}).then((e=>s(this,void 0,void 0,(function*(){var t,r;let s=null,n=null,i=e.status,o=e.statusText;if(200==e.statusCode){const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.split(",").includes("return=minimal");if("HEAD"!==this.method&&!r){const t=yield e;t&&(this.headers.Accept,n=t)}}else{const t=yield e;try{s=t}catch(e){s={message:t}}if(s&&this.allowEmpty&&(null===(r=null==s?void 0:s.details)||void 0===r?void 0:r.includes("Results contain 0 rows"))&&(s=null,i=200,o="OK"),s&&this.shouldThrowOnError)throw s}return{error:s,data:n,count:null,status:i,statusText:o,body:n}}))));return this.shouldThrowOnError||(r=r.catch((e=>({error:{message:`FetchError: ${e.message}`,details:"",hint:"",code:e.code||""},data:null,body:null,count:null,status:400,statusText:"Bad Request"})))),r.then(e,t)}}},629:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},603:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorageClient=void 0;const s=r(472);class n extends s.StorageBucketApi{constructor(e,t={},r){super(e,t,r)}from(e){return new s.StorageFileApi(this.url,this.headers,e,this.fetch)}}t.StorageClient=n},309:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.SupabaseStorageClient=t.StorageClient=void 0;var i=r(603);Object.defineProperty(t,"StorageClient",{enumerable:!0,get:function(){return i.StorageClient}}),Object.defineProperty(t,"SupabaseStorageClient",{enumerable:!0,get:function(){return i.StorageClient}}),n(r(63),t)},836:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{u(s.next(e))}catch(e){i(e)}}function a(e){try{u(s.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StorageBucketApi=void 0;const n=r(854),i=r(254),o=r(727);t.StorageBucketApi=class{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),t),this.fetch=(0,o.resolveFetch)(r)}listBuckets(){return s(this,void 0,void 0,(function*(){try{return{data:yield(0,i.get)(`${this.url}/bucket`,{header:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}getBucket(e){return s(this,void 0,void 0,(function*(){try{return{data:yield(0,i.get)(`${this.url}/bucket/${e}`,{header:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}createBucket(e,t={public:!1}){return s(this,void 0,void 0,(function*(){try{return{data:(yield(0,i.post)(`${this.url}/bucket`,{id:e,name:e,public:t.public},{header:this.headers})).name,error:null}}catch(e){return{data:null,error:e}}}))}updateBucket(e,t){return s(this,void 0,void 0,(function*(){try{return{data:yield(0,i.put)(`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{header:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}emptyBucket(e){return s(this,void 0,void 0,(function*(){try{return{data:yield(0,i.post)(`${this.url}/bucket/${e}/empty`,{},{header:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}deleteBucket(e){return s(this,void 0,void 0,(function*(){try{return{data:yield(0,i.remove)(`${this.url}/bucket/${e}`,{},{header:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}}},89:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{u(s.next(e))}catch(e){i(e)}}function a(e){try{u(s.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StorageFileApi=void 0;const n=r(254),i=r(727);let o=r(437);const a={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},u={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};t.StorageFileApi=class{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=(0,i.resolveFetch)(s)}uploadOrUpdate(e,t,r,n){return s(this,void 0,void 0,(function*(){try{let s;const i=Object.assign(Object.assign({},u),n),a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),s.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl)):(s=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType);const c=this._removeEmptyFolders(t),l=this._getFinalPath(c),h=yield o(`${this.url}/object/${l}`,{method:e,data:s,header:this.headers});return 200==h.statusCode?{data:{Key:l},error:null}:{data:null,error:yield h}}catch(e){return{data:null,error:e}}}))}upload(e,t,r){return s(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,r)}))}update(e,t,r){return s(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,r)}))}move(e,t){return s(this,void 0,void 0,(function*(){try{return{data:yield(0,n.post)(`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{header:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}copy(e,t){return s(this,void 0,void 0,(function*(){try{return{data:yield(0,n.post)(`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{header:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}createSignedUrl(e,t){return s(this,void 0,void 0,(function*(){try{const r=this._getFinalPath(e);let s=yield(0,n.post)(`${this.url}/object/sign/${r}`,{expiresIn:t},{header:this.headers});const i=`${this.url}${s.signedURL}`;return s={signedURL:i},{data:s,error:null,signedURL:i}}catch(e){return{data:null,error:e,signedURL:null}}}))}createSignedUrls(e,t){return s(this,void 0,void 0,(function*(){try{return{data:(yield(0,n.post)(`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{header:this.headers})).map((e=>Object.assign(Object.assign({},e),{signedURL:e.signedURL?`${this.url}${e.signedURL}`:null}))),error:null}}catch(e){return{data:null,error:e}}}))}download(e){return s(this,void 0,void 0,(function*(){try{const t=this._getFinalPath(e),r=yield(0,n.get)(`${this.url}/object/${t}`,{header:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(e){return{data:null,error:e}}}))}getPublicUrl(e){try{const t=this._getFinalPath(e),r=`${this.url}/object/public/${t}`;return{data:{publicURL:r},error:null,publicURL:r}}catch(e){return{data:null,error:e,publicURL:null}}}remove(e){return s(this,void 0,void 0,(function*(){try{return{data:yield(0,n.remove)(`${this.url}/object/${this.bucketId}`,{prefixes:e},{header:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}list(e,t,r){return s(this,void 0,void 0,(function*(){try{const s=Object.assign(Object.assign(Object.assign({},a),t),{prefix:e||""});return{data:yield(0,n.post)(`${this.url}/object/list/${this.bucketId}`,{data:s},{header:this.headers},r),error:null}}catch(e){return{data:null,error:e}}}))}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}}},854:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const s=r(702);t.DEFAULT_HEADERS={"X-Client-Info":`storage-js/${s.version}`}},254:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{u(s.next(e))}catch(e){i(e)}}function a(e){try{u(s.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.put=t.post=t.get=void 0;const n=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);let i=r(437);function o(e,t,r,o,a){return s(this,void 0,void 0,(function*(){return new Promise(((s,u)=>{let c=((e,t,r,s)=>{const n={method:e,headers:(null==t?void 0:t.header)||{}};return"GET"===e?n:(n.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.header),n.data=JSON.stringify(s),Object.assign(Object.assign({},n),r))})(e,r,o,a);c=Object.assign(Object.assign({},c),{header:c.headers,data:JSON.parse(c.body)}),i(t,c).then((e=>{if(200==e.statusCode)throw e;return(null==r?void 0:r.noResolveJson)?s(e):e})).then((e=>s(e))).catch((e=>((e,t)=>{if("function"!=typeof e.json)return t(e);e.json().then((r=>t({message:n(r),status:(null==e?void 0:e.status)||500})))})(e,u)))}))}))}t.get=function(e,t,r){return s(this,void 0,void 0,(function*(){return o("GET",e,t,r)}))},t.post=function(e,t,r,n){return s(this,void 0,void 0,(function*(){return o("POST",e,r,n,t)}))},t.put=function(e,t,r,n){return s(this,void 0,void 0,(function*(){return o("PUT",e,r,n,t)}))},t.remove=function(e,t,r,n){return s(this,void 0,void 0,(function*(){return o("DELETE",e,r,n,t)}))}},727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveFetch=void 0,t.resolveFetch=e=>{let t;const s=r(437);return t=s,(...e)=>t(...e)}},472:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(836),t),n(r(89),t),n(r(63),t),n(r(854),t)},63:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},702:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0"},297:function(e){e.exports=function(){"use strict";function e(){this.listeners={}}e.prototype.on=function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.emit=function(e,t){var r=this.listeners[e];r&&r.forEach((function(e){e(t)}))};var t=new e;function r(e){return function(r){(r=r||{}).config=r.config||{};for(var s=arguments.length,n=Array(1<s?s-1:0),i=1;i<s;i++)n[i-1]=arguments[i];return new Promise((function(s,i){r.config.eventType?t.emit(r.config.eventType,e.apply(void 0,[Object.assign({},r,{success:s,fail:i})].concat(n))):e.apply(void 0,[Object.assign({},r,{success:s,fail:i})].concat(n))}))}}function s(){this.platform=null,this.api=null}s.prototype.getRequest=function(){return"undefined"!=typeof wx?(this.platform="wx",this.api=wx,r(wx.request)):"undefined"!=typeof my?(this.platform="my",this.api=my,my.request?r(my.request):r(my.httpRequest)):"undefined"!=typeof tt?(this.api=tt,this.platform="tt",r(tt.request)):"undefined"!=typeof swan?(this.api=swan,this.platform="swan",r(swan.request)):void 0},s.prototype.getUpload=function(){return r(this.api.uploadFile)},s.prototype.getDownload=function(){return r(this.api.downloadFile)};var n=new s,i={createRequest:n.getRequest(),header:{},config:{},method:"get",timeout:0};function o(e,t){return function(){for(var r=new Array(arguments.length),s=0,n=r.length;s<n;s++)r[s]=arguments[s];return e.apply(t,r)}}var a=Object.prototype.toString,u={type:function(){for(var e={},t=["String","Object","Number","Array","Undefined","Function","Null","Date"],r=0,s=t.length;r<s;r++)!function(t){e["is"+t]=function(e){return a.call(e)==="[object "+t+"]"}}(t[r]);return e}(),normalizeHeaderName:function(e){for(var t in e)/Content-Type/gi.test(t)&&(e["Content-Type"]=e[t],delete e[t])},forEach:function(e,t){if(e)if("object"!=typeof e&&(e=[e]),this.type.isArray(e))for(var r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)},merge:function(){var e={};function t(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=u.merge(e[r],t):e[r]=t}for(var r=0,s=arguments.length;r<s;r++)this.forEach(arguments[r],t);return e},deepMerge:function(){var e={};function t(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=u.deepMerge(e[r],t):e[r]="object"==typeof t?u.deepMerge({},t):t}for(var r=0,s=arguments.length;r<s;r++)this.forEach(arguments[r],t);return e},mergeConfig:function(e,t){var r={};return t=t||{},["url","method","data","config"].forEach((function(e){t[e]&&(r[e]=t[e])})),["header","headers"].forEach((function(s){u.type.isObject(t[s])?r[s]=u.deepMerge(e[s],t[s]):t[s]?r[s]=t[s]:u.type.isObject(e[s])?r[s]=u.deepMerge(e[s]):e[s]&&(r[s]=e[s])})),["baseUrl","timeout","eventType","createRequest"].forEach((function(s){void 0!==t[s]?r[s]=t[s]:void 0!==e[s]&&(r[s]=e[s])})),r},extends:function(e,t,r){return this.forEach(t,(function(t,s){e[s]=r&&"function"==typeof t?o(t,r):t})),e}};function c(){this.handles=[]}function l(e){return u.normalizeHeaderName(e.header||e.headers),"download"===e.method&&(e.method="get",e.createRequest=n.getDownload()),"upload"===e.method&&(e.method="post",e.createRequest=n.getUpload()),(0,e.createRequest)(e).then((function(e){return e}),(function(e){return Promise.reject(e)}))}function h(e){this.defaults=e,this.before=new c,this.after=new c}function d(e){var t=new h(e),r=o(h.prototype.request,t);return u.extends(r,h.prototype,t),u.extends(r,t),r}c.prototype.use=function(e,t){return this.handles.push({fulfilled:e,rejected:t}),this.handles.length-1},c.prototype.eject=function(e){this.handles[e]&&(this.handles[e]=null)},c.prototype.forEach=function(e){this.handles.forEach((function(t){t&&e(t)}))},["options","get","head","post","put","delete","trace","connect"].forEach((function(e){h.prototype[e]=function(t,r){return this.request(u.merge(r||{},{url:t,method:e}))}})),h.prototype.download=function(e,t){return u.type.isObject(e)?this.request(u.merge(e,{method:"download"})):this.request(u.merge(t||{},{url:e,method:"download"}))},h.prototype.upload=function(e,t){return u.type.isObject(e)?this.request(e,{method:"upload"}):this.request(u.merge(t||{},{url:e,method:"upload"}))},h.prototype.on=function(e,r){t.on(e,r)},h.prototype.abort=function(e,t){this.on(e,(function(e){e.abort(),t&&t()}))},h.prototype.onProcess=function(e,t){this.on(e,(function(e){e.onProgressUpdate(t)}))},h.prototype.promisify=r,h.prototype.request=function(e){"string"==typeof e&&((e=arguments[1]||{}).url=arguments[0]),-1===(e=u.mergeConfig(this.defaults,e)).url.indexOf("http")&&(e.downloadUrl&&"download"===e.method?e.url=e.downloadUrl+e.url:e.uploadUrl&&"upload"===e.method?e.url=e.uploadUrl+e.url:e.url=e.baseUrl+e.url),"my"===n.platform&&"download"!==e.method&&"upload"!==e.method&&(e.headers=Object.assign({},e.header),delete e.header);var t=[l,void 0],r=Promise.resolve(e);for(this.before.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.after.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},Promise.prototype.finally=Promise.prototype.finally||function(e){var t=this.constructor;return this.then((function(r){t.resolve(e(r)).then((function(){return r}))}),(function(r){t.resolve(e(r)).then((function(){return Promise.reject(r)}))}))};var p=d(i);return p.all=function(e){return Promise.all(e)},p.retry=function e(t,r,s){if(s=s||1e3,!t&&0!==t||!r)throw new Error("request and times params is required");if("function"!=typeof r)throw new Error("request must be a function, but got a\n"+typeof r);var n=r();return 1<t?(t--,new Promise((function(i,o){n.then(i).catch((function(){setTimeout((function(){i(e(t,r,s))}),s)}))}))):n},p.create=function(e){return d(u.merge(i,e))},p}()},437:(e,t,r)=>{e.exports=r(297)}},t={},function r(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,r),i.exports}(341);var e,t}));